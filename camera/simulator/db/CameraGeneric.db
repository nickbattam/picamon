#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBDEND

record(calc,"$(CAMERA_NAME):ExposureTime_RBV") {
  field(CALC, "a*1000")
  field(INPA,"$(CAMERA_NAME):cam1:AcquireTime_RBV CP")
  field(EGU, "ms")
  field(PREC, "2")
}

record(ai,"$(CAMERA_NAME):ExposureTime") {
  field(PINI, "YES")
  field(VAL, "0.1")
  field(EGU, "ms")
  field(PREC, "2")
  field(FLNK, "$(CAMERA_NAME):ExposureTimeCalc PP") 
}

record(calcout, "$(CAMERA_NAME):ExposureTimeCalc") {
  field(CALC, "a/1000")
  field(INPA,"$(CAMERA_NAME):ExposureTime")
  field(OUT, "$(CAMERA_NAME):cam1:AcquireTime PP")
}

record(bi, "$(CAMERA_NAME):SIMULATION") {
  field(PINI, "YES")
  field(VAL, "0")
  field(ZNAM, "NO")
  field(ONAM, "YES")
}

record(stringin, "$(CAMERA_NAME):COLOUR_MAP") {
}

record(aSub, "$(CAMERA_NAME):CHANGE_CALC") {
  field(SNAM, "change_monitoring")
  field(SCAN, "2 second")
  field(INPA, "$(CAMERA_NAME):cam1:ArrayCounter_RBV")
  field(FTA, "LONG")
  field(INPB, "$(CAMERA_NAME):COUNTER_OLD")
  field(FTB, "LONG")
  field(OUTA, "$(CAMERA_NAME):COUNTER_OLD PP")
  field(FTVA, "LONG")
  field(OUTB, "$(CAMERA_NAME):CHANGE PP")
  field(FTVB, "LONG")
}

record(longin, "$(CAMERA_NAME):COUNTER_OLD") {
}

record(bi, "$(CAMERA_NAME):CHANGE") {
  field(ZNAM, "NO")
  field(ONAM, "YES")
}

record(bi, "$(CAMERA_NAME):STREAMING") {
  field(PINI, "YES")
  field(VAL, "0")
  field(ZNAM, "OFF")
  field(ONAM, "ON")
}

record(calcout, "$(CAMERA_NAME):STREAMING_CALC") {
  field(SCAN, ".1 second")
  field(FLNK, "$(CAMERA_NAME):STREAMING")
  field(CALC, "a && b && ((c==1)? 1:0)")
  field(INPA, "$(CAMERA_NAME):cam1:AsynIO.CNCT")
  field(INPB, "$(CAMERA_NAME):cam1:Acquire_RBV")
  field(INPC, "$(CAMERA_NAME):CHANGE")
  field(OUT, "$(CAMERA_NAME):STREAMING")
  field(OOPT, "On Change")
}

record(calc, "$(CAMERA_NAME):STATE") {
  field(SCAN, ".1 second")
  field(CALC, "(a? (b? 1:2):3)")
  field(INPA, "$(CAMERA_NAME):cam1:AsynIO.CNCT")
  field(INPB, "$(CAMERA_NAME):STREAMING")
}

record(stringin, "$(CAMERA_NAME):USERNAME") {
}

record(calc, "$(CAMERA_NAME):ISSATURATED") {
  field(SCAN, ".1 second")
  field(CALC, "(b>a)? 1:0")
  field(INPA, "$(CAMERA_NAME):SATURATION_LIMIT PP")
  field(INPB, "$(CAMERA_NAME):Stats1:MaxValue_RBV")
}

record(longin, "$(CAMERA_NAME):SATURATION_LIMIT") {
  field(PINI, "YES")
  field(VAL, "127")
  field(HOPR, "255")
  field(LOPR, "0")
}

#record(aSub, "$(CAMERA_NAME):image1:SIGNED_CONVERSION_CALC") {
#  field(FLNK, "$(CAMERA_NAME):image1:UnsignedArrayData")
#  field(SNAM, "sign_conversion")
#  field(INPA, "$(CAMERA_NAME):image1:ArrayData CP")
#  field(FTA, "UCHAR")
#  field(NOA, "$(ARRAYSIZE)")
#  field(FTVA, "UCHAR")
#  field(NOVA, "$(ARRAYSIZE)")
#  field(OUTA, "$(CAMERA_NAME):image1:UnsignedArrayData")
#}
#
#record(waveform, "$(CAMERA_NAME):image1:UnsignedArrayData") {
#  field(DESC, "Array data 0-255")
#  field(DTYP, "Soft Channel")
#  field(NELM, "$(ARRAYSIZE)")
#  field(FTVL, "SHORT")
#}
record(aSub, "$(CAMERA_NAME):image1:LIMIT_VALUES_CALC") {
  field(FLNK, "$(CAMERA_NAME):image1:LimitedArrayData")
  field(SNAM, "limit_values")
  field(SCAN, ".2 second")
  field(INPA, "$(CAMERA_NAME):image1:ArrayData")
  field(FTA, "UCHAR")
  field(NOA, "$(ARRAYSIZE)")
  field(FTVA, "UCHAR")
  field(NOVA, "$(ARRAYSIZE)")
  field(OUTA, "$(CAMERA_NAME):image1:LimitedArrayData")
}

record(waveform, "$(CAMERA_NAME):image1:LimitedArrayData") {
  field(DESC, "Array data 0-127")
  field(DTYP, "Soft Channel")
  field(NELM, "$(ARRAYSIZE)")
  field(FTVL, "UCHAR")
}

record(aSub, "$(CAMERA_NAME):image2:LIMIT_VALUES_CALC") {
  field(FLNK, "$(CAMERA_NAME):image2:LimitedArrayData")
  field(SNAM, "limit_values")
  field(SCAN, ".2 second")
  field(INPA, "$(CAMERA_NAME):image2:ArrayData")
  field(FTA, "UCHAR")
  field(NOA, "$(ARRAYSIZE)")
  field(FTVA, "UCHAR")
  field(NOVA, "$(ARRAYSIZE)")
  field(OUTA, "$(CAMERA_NAME):image2:LimitedArrayData")
}

record(waveform, "$(CAMERA_NAME):image2:LimitedArrayData") {
  field(DESC, "Array data 0-127")
  field(DTYP, "Soft Channel")
  field(NELM, "$(ARRAYSIZE)")
  field(FTVL, "UCHAR")
}

#! Further lines contain data used by VisualDCT
#! View(0,218,1.0)
#! Record("$(CAMERA_NAME):COLOUR_MAP",40,23,0,0,"$(CAMERA_NAME):COLOUR_MAP")
#! Record("$(CAMERA_NAME):CHANGE_CALC",320,465,0,0,"$(CAMERA_NAME):CHANGE_CALC")
#! Field("$(CAMERA_NAME):CHANGE_CALC.INPA",16777215,1,"$(CAMERA_NAME):CHANGE_CALC.INPA")
#! Field("$(CAMERA_NAME):CHANGE_CALC.INPB",16777215,0,"$(CAMERA_NAME):CHANGE_CALC.INPB")
#! Link("$(CAMERA_NAME):CHANGE_CALC.INPB","$(CAMERA_NAME):COUNTER_OLD.VAL")
#! Field("$(CAMERA_NAME):CHANGE_CALC.OUTA",16777215,0,"$(CAMERA_NAME):CHANGE_CALC.OUTA")
#! Link("$(CAMERA_NAME):CHANGE_CALC.OUTA","$(CAMERA_NAME):COUNTER_OLD.VAL")
#! Field("$(CAMERA_NAME):CHANGE_CALC.OUTB",16777215,1,"$(CAMERA_NAME):CHANGE_CALC.OUTB")
#! Link("$(CAMERA_NAME):CHANGE_CALC.OUTB","$(CAMERA_NAME):CHANGE.VAL")
#! Record("$(CAMERA_NAME):COUNTER_OLD",40,623,0,0,"$(CAMERA_NAME):COUNTER_OLD")
#! Field("$(CAMERA_NAME):COUNTER_OLD.VAL",16777215,1,"$(CAMERA_NAME):COUNTER_OLD.VAL")
#! Record("$(CAMERA_NAME):CHANGE",580,636,0,0,"$(CAMERA_NAME):CHANGE")
#! Field("$(CAMERA_NAME):CHANGE.VAL",16777215,1,"$(CAMERA_NAME):CHANGE.VAL")
#! Record("$(CAMERA_NAME):STREAMING",1160,588,0,0,"$(CAMERA_NAME):STREAMING")
#! Field("$(CAMERA_NAME):STREAMING.VAL",16777215,0,"$(CAMERA_NAME):STREAMING.VAL")
#! Record("$(CAMERA_NAME):STREAMING_CALC",840,512,0,1,"$(CAMERA_NAME):STREAMING_CALC")
#! Field("$(CAMERA_NAME):STREAMING_CALC.INPA",16777215,1,"$(CAMERA_NAME):STREAMING_CALC.INPA")
#! Field("$(CAMERA_NAME):STREAMING_CALC.INPB",16777215,1,"$(CAMERA_NAME):STREAMING_CALC.INPB")
#! Field("$(CAMERA_NAME):STREAMING_CALC.INPC",16777215,0,"$(CAMERA_NAME):STREAMING_CALC.INPC")
#! Link("$(CAMERA_NAME):STREAMING_CALC.INPC","$(CAMERA_NAME):CHANGE.VAL")
#! Field("$(CAMERA_NAME):STREAMING_CALC.FLNK",16777215,1,"$(CAMERA_NAME):STREAMING_CALC.FLNK")
#! Link("$(CAMERA_NAME):STREAMING_CALC.FLNK","$(CAMERA_NAME):STREAMING")
#! Field("$(CAMERA_NAME):STREAMING_CALC.OUT",16777215,1,"$(CAMERA_NAME):STREAMING_CALC.OUT")
#! Link("$(CAMERA_NAME):STREAMING_CALC.OUT","$(CAMERA_NAME):STREAMING.VAL")
#! Record("$(CAMERA_NAME):STATE",1400,568,0,1,"$(CAMERA_NAME):STATE")
#! Field("$(CAMERA_NAME):STATE.INPA",16777215,1,"$(CAMERA_NAME):STATE.INPA")
#! Field("$(CAMERA_NAME):STATE.INPB",16777215,0,"$(CAMERA_NAME):STATE.INPB")
#! Link("$(CAMERA_NAME):STATE.INPB","$(CAMERA_NAME):STREAMING.VAL")
#! Record("$(CAMERA_NAME):USERNAME",320,63,0,0,"$(CAMERA_NAME):USERNAME")
#! Record("$(CAMERA_NAME):ISSATURATED",1480,48,0,1,"$(CAMERA_NAME):ISSATURATED")
#! Field("$(CAMERA_NAME):ISSATURATED.INPA",16777215,0,"$(CAMERA_NAME):ISSATURATED.INPA")
#! Link("$(CAMERA_NAME):ISSATURATED.INPA","$(CAMERA_NAME):SATURATION_LIMIT.VAL")
#! Field("$(CAMERA_NAME):ISSATURATED.INPB",16777215,1,"$(CAMERA_NAME):ISSATURATED.INPB")
#! Record("$(CAMERA_NAME):SATURATION_LIMIT",1400,248,0,1,"$(CAMERA_NAME):SATURATION_LIMIT")
#! Field("$(CAMERA_NAME):SATURATION_LIMIT.VAL",16777215,0,"$(CAMERA_NAME):SATURATION_LIMIT.VAL")
#! Record("$(CAMERA_NAME):image1:LIMIT_VALUES_CALC",740,19,0,0,"$(CAMERA_NAME):image1:LIMIT_VALUES_CALC")
#! Field("$(CAMERA_NAME):image1:LIMIT_VALUES_CALC.FLNK",16777215,1,"$(CAMERA_NAME):image1:LIMIT_VALUES_CALC.FLNK")
#! Link("$(CAMERA_NAME):image1:LIMIT_VALUES_CALC.FLNK","$(CAMERA_NAME):image1:LimitedArrayData")
#! Field("$(CAMERA_NAME):image1:LIMIT_VALUES_CALC.INPA",16777215,1,"$(CAMERA_NAME):image1:LIMIT_VALUES_CALC.INPA")
#! Field("$(CAMERA_NAME):image1:LIMIT_VALUES_CALC.OUTA",16777215,1,"$(CAMERA_NAME):image1:LIMIT_VALUES_CALC.OUTA")
#! Link("$(CAMERA_NAME):image1:LIMIT_VALUES_CALC.OUTA","$(CAMERA_NAME):image1:LimitedArrayData.VAL")
#! Record("$(CAMERA_NAME):image1:LimitedArrayData",980,28,0,1,"$(CAMERA_NAME):image1:LimitedArrayData")
#! Field("$(CAMERA_NAME):image1:LimitedArrayData.VAL",16777215,1,"$(CAMERA_NAME):image1:LimitedArrayData.VAL")
